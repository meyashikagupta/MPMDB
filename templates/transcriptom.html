{% extends "base.html" %}
{% load static %}

{% block page_title %}Transcriptomics Â· MPMDB{% endblock %}

{% block content %}
<div class="data-shell">
  <section class="section">
    <div class="surface data-hero">
      <p class="eyebrow">Expression intelligence</p>
      <h1>RNA-Seq runs, library chemistries, and project provenance</h1>
      <p>
        Align BioProject and BioSample identifiers with DNA/RNA library statistics to quickly evaluate transcriptomic
        readiness for each plant species.
      </p>
      <div class="data-hero-grid">
        <div class="data-metric">
          <small>Active query</small>
          <strong>{{ query|default:"-" }}</strong>
          <span>Plant or BioProject keyword</span>
        </div>
        <div class="data-metric">
          <small>Results returned</small>
          <strong>{{ result_count }}</strong>
          <span>Expression summaries</span>
        </div>
        <div class="data-metric">
          <small>Catalogue</small>
          <strong>{{ catalogue|length }}</strong>
          <span>Total curated entries</span>
        </div>
      </div>
    </div>
  </section>

  <section class="section compact">
    <div class="surface data-search">
      <form method="get">
        <label for="transcript-query">Plant, BioProject, or library descriptor</label>
        <div class="form-row">
          <input
            id="transcript-query"
            name="q"
            type="text"
            value="{{ query }}"
            placeholder="e.g. Ocimum, SRA, drought stress"
            list="transcript-catalogue"
            autocomplete="off"
          />
          <button type="submit">Run search</button>
          {% if query %}
          <a href="?" class="ghost-link">Clear</a>
          {% endif %}
        </div>
        <small>Search by plant name, BioProject ID, BioSample, or experimental condition.</small>
      </form>
      <datalist id="transcript-catalogue">
        {% for common, scientific in catalogue %}
        <option value="{{ common }}">{{ scientific }}</option>
        {% endfor %}
      </datalist>
    </div>
  </section>

  <section class="section">
    <div class="surface data-table-wrapper">
      {% if object_list %}
      <table class="data-table">
        <thead>
          <tr>
            <th>Plant</th>
            <th>Scientific name</th>
            <th>SRA runs</th>
            <th>DNA libraries</th>
            <th>RNA libraries</th>
            <th>BioProjects</th>
            <th>BioSamples</th>
            <th>NCBI link</th>
          </tr>
        </thead>
        <tbody>
          {% for entry in object_list %}
          <tr>
            <td>{{ entry.Plant_Name }}</td>
            <td><em>{{ entry.Scientific_Name }}</em></td>
            <td>{{ entry.SRA }}</td>
            <td>{{ entry.DNA }}</td>
            <td>{{ entry.RNA }}</td>
            <td>{{ entry.BioProject }}</td>
            <td>{{ entry.BioSample }}</td>
            <td>
              {% if entry.NCBI_link %}
              <a href="{{ entry.NCBI_link }}" target="_blank" rel="noopener">Open</a>
              {% else %}
              -
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <div class="empty-state">
        <p>No transcriptomic records match that query yet. Try alternate plant synonyms or project identifiers.</p>
      </div>
      {% endif %}
    </div>
    <div class="data-footnote">
      Expression summaries aggregate public SRA submissions and annotated BioProjects to accelerate experimental planning.
    </div>
  </section>

  <div class="sequencing-cta surface">
    <div>
      <h3>Transcriptomics assistant</h3>
      <p>Ask the Plant Bot to contextualise RNA-Seq depth, BioProject coverage, and stress-condition contrasts.</p>
    </div>
    <a class="primary" href="plantbot.html?focus=transcriptomics&prefill=Summarize%20the%20transcriptomic%20posture%20of%20">Launch Bot</a>
  </div>

  {% include "partials/plant_showcase.html" with heading="Expression exemplars" subheading="Species with rich RNA-Seq coverage across stress and tissue conditions." %}
</div>
{% endblock %}
